# 随机覆盖范围分析

## 主效果统计（已更新）

### 总数：31个（从10个增加到31个）

#### 投射类（12个）
| ID | 名称 | 权重 |
|---|---|---|
| core_projectile_basic | 基础投射 | 1.0 |
| core_projectile_multi | 多弹投射 | 0.8 |
| core_projectile_scatter5 | 5弹散射 | 0.5 |
| core_projectile_scatter_circle | 圆形散射 | 0.4 |
| core_projectile_burst | 连发投射 | 0.7 |
| core_projectile_burst5 | 5连发 | 0.5 |
| core_projectile_explosive | 爆炸投射 | 0.6 |
| core_projectile_ricochet | 弹跳投射 | 0.6 |
| core_projectile_spiral | 螺旋投射 | 0.7 |
| core_projectile_orbit | 环绕投射 | 0.5 |
| core_projectile_return | 回旋投射 | 0.6 |
| core_projectile_hover | 悬停投射 | 0.5 |

#### 光束类（5个）
| ID | 名称 | 权重 |
|---|---|---|
| core_beam_short | 短光束 | 0.5 |
| core_beam_long | 长光束 | 0.4 |
| core_beam_wide | 宽光束 | 0.5 |
| core_beam_rotating | 旋转光束 | 0.4 |
| core_beam_sustained | 持续光束 | 0.3 |

#### 近战类（5个）
| ID | 名称 | 权重 |
|---|---|---|
| core_melee_single | 单体近战 | 0.9 |
| core_melee_cone | 扇形近战 | 0.7 |
| core_melee_circle | 范围近战 | 0.6 |
| core_melee_combo | 连击近战 | 0.7 |
| core_melee_dash | 突进近战 | 0.6 |

#### 区域类（5个）
| ID | 名称 | 权重 |
|---|---|---|
| core_area_dot | 区域持续 | 0.6 |
| core_area_large | 大范围持续 | 0.5 |
| core_area_heal | 治疗区域 | 0.5 |
| core_area_slow | 减速区域 | 0.6 |
| core_area_buff | 增益区域 | 0.5 |

#### 召唤类（4个）
| ID | 名称 | 权重 |
|---|---|---|
| core_summon | 召唤 | 0.3 |
| core_summon_trap | 陷阱 | 0.4 |
| core_summon_turret | 炮塔 | 0.3 |
| core_summon_multiple | 多重召唤 | 0.2 |

#### 特殊伤害类（5个）
| ID | 名称 | 权重 |
|---|---|---|
| core_damage_bounce | 弹射伤害 | 0.6 |
| core_damage_pierce | 穿透伤害 | 0.7 |
| core_damage_execute | 处决伤害 | 0.6 |
| core_damage_bleed | 流血伤害 | 0.6 |
| core_damage_crit | 暴击伤害 | 0.7 |

**总权重**：约17.0（从5.4大幅提升）

**改进效果**：
- ✅ 主效果数量从10个增加到31个，丰富度提升210%
- ✅ 每个类别都有多个变体，提供更多选择
- ✅ 新增特殊伤害类主效果，提供独特的伤害机制
- ✅ 权重分布更均匀，避免某些效果过于稀少

## 副效果统计

### 总数：22个

### 按类别分组：

#### 1. 伤害加成类 (3个)
- **更多伤害** (weight: 1.0) - 通用
- **增加伤害** (weight: 1.2) - 通用
- **残暴伤害** (weight: 0.5) - 通用，有负面效果

#### 2. 投射物修饰类 (5个)
- **追踪** (weight: 0.8) - 仅projectile
- **穿透** (weight: 0.9) - 仅projectile
- **分裂** (weight: 0.7) - 仅projectile
- **连锁** (weight: 0.6) - 仅projectile
- **爆炸** (weight: 0.5) - 仅projectile

**问题**：投射物修饰类只能用于projectile类别主效果，对于beam、melee、area、summon类别无法使用。

#### 3. 控制效果类 (3个)
- **减速** (weight: 1.0) - 通用
- **眩晕** (weight: 0.7) - 通用
- **易伤** (weight: 1.1) - 通用

#### 4. 范围扩展类 (2个)
- **范围扩大** (weight: 0.8) - area, projectile
- **巨大范围** (weight: 0.4) - area, projectile，有负面效果

**问题**：范围扩展类只能用于area和projectile类别，对于beam、melee、summon类别无法使用。

#### 5. 速度/手感类 (3个)
- **快速施法** (weight: 1.1) - 通用
- **快速投射** (weight: 1.0) - 仅projectile
- **慢速强击** (weight: 0.6) - 仅projectile

**问题**：快速投射和慢速强击只能用于projectile类别。

#### 6. 特殊机制类 (2个)
- **蓄力** (weight: 0.5) - 通用
- **多重施法** (weight: 0.4) - 通用，有负面效果

#### 7. 增益类 (2个)
- **生命偷取** (weight: 0.8) - 通用
- **命中护盾** (weight: 0.7) - 通用

#### 8. 高风险高回报类 (2个)
- **狂暴** (weight: 0.3) - 通用，有负面效果
- **过载** (weight: 0.2) - 通用，有负面效果

**问题**：高风险高回报类权重很低，且会被`highRiskHighRewardWeight.weightMultiplier: 0.6`进一步降低，实际权重只有0.18和0.12，几乎不会出现。

## 兼容性问题分析

### 各主效果类别可用的副效果数量：

| 主效果类别 | 可用副效果数 | 通用副效果 | 专用副效果 |
|---|---|---|---|
| **projectile** | 22个 | 15个 | 7个 (projectile_mod + projectile_speed + area_mod) |
| **beam** | 15个 | 15个 | 0个 |
| **melee** | 15个 | 15个 | 0个 |
| **area** | 17个 | 15个 | 2个 (area_mod) |
| **summon** | 15个 | 15个 | 0个 |

**问题**：
- ⚠️ beam、melee、summon类别只能使用通用副效果，无法使用投射物修饰、投射物速度、范围扩展等专用副效果
- ⚠️ 这导致这些类别的主效果副效果选择范围较小，多样性受限

## 权重分布问题

### 权重过低的效果（< 0.5）：

1. **残暴伤害** (0.5) - 有负面效果
2. **爆炸** (0.5) - 投射物修饰
3. **巨大范围** (0.4) - 有负面效果
4. **多重施法** (0.4) - 有负面效果
5. **狂暴** (0.3) - 高风险高回报，有负面效果，实际权重约0.18
6. **过载** (0.2) - 高风险高回报，有负面效果，实际权重约0.12

**问题**：
- ⚠️ 高风险高回报类（狂暴、过载）权重过低，且被进一步降低，几乎不会出现
- ⚠️ 多重施法权重过低（0.4），可能很少出现

## 建议改进

### 1. 增加主效果多样性
- 考虑添加更多beam、melee、area、summon类别的主效果变体
- 或者为这些类别添加专用副效果

### 2. 提高低权重效果的权重
- **高风险高回报类**：将权重从0.3/0.2提升到0.5/0.4，或提高`weightMultiplier`到0.8
- **多重施法**：将权重从0.4提升到0.6
- **巨大范围**：将权重从0.4提升到0.6

### 3. 扩展兼容性规则
- 为beam类别添加专用副效果（如光束延长、光束旋转等）
- 为melee类别添加专用副效果（如近战范围扩大、近战连击等）
- 为summon类别添加专用副效果（如召唤数量增加、召唤强化等）

### 4. 确保所有效果都能被随机到
- 检查是否有某些效果因为兼容性限制而完全无法出现
- 考虑添加"强制出现"机制，确保低权重效果也有一定概率出现
