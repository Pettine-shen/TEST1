# 主效果与副效果系统设计（已废弃）

> **状态**：已废弃  
> **废弃时间**：2026-01-14  
> **废弃原因**：系统已回退到动态ECA生成系统，使用技能性格系统替代

## 历史说明

本系统参考流放之路2的BD设计，采用**主效果（Core）+ 副效果（Support）**架构。但在实际实现中发现：

1. **多样性下降**：主效果+副效果架构限制了技能组合的多样性
2. **复杂度增加**：需要维护主效果和副效果的兼容性关系
3. **灵活性不足**：无法充分利用动态ECA生成系统的灵活性

## 替代方案

当前实现使用：
- **技能性格系统**（`configs/skillPersonalities.js`）：通过性格标签影响动作权重
- **策略维度系统**：定义策略定位（伤害vs控制、安全vs风险等）
- **动态ECA生成**：完全动态生成技能结构，不受固定模板限制

## 保留内容（仅供参考）

以下内容保留作为历史参考，当前实现已不再使用：

---

## 1. 设计理念

参考流放之路2的BD设计，采用**主效果（Core）+ 副效果（Support）**架构：

- **主效果**：提供核心技能功能，满足差异化随机体验
- **副效果**：对主效果产生正向加成，可能带来负面效果（trade-off）

## 2. 系统架构

### 2.1 主效果（Core Skills）

主效果定义了技能的基础类型和能力，包括：

- **投射类**：基础投射、多弹投射、连发投射、爆炸投射
- **光束类**：短光束、长光束
- **近战类**：单体近战、扇形近战
- **区域类**：区域持续伤害
- **特殊类**：召唤

每个主效果包含：
- `id`: 唯一标识
- `label`: 显示名称
- `category`: 类别（用于兼容性检查）
- `baseAction`: 基础动作配置（伤害公式、预算、表现参数等）
- `baseBudget`: 基础预算
- `weight`: 选择权重

### 2.2 副效果（Support Modifiers）

副效果对主效果进行修饰和增强，包括：

#### 伤害加成类
- **更多伤害**：50%更多伤害
- **增加伤害**：30%更多伤害
- **残暴伤害**：100%更多伤害（负面：30%减速）

#### 投射物修饰类
- **追踪**：添加追踪效果（速度降低30%）
- **穿透**：穿透3个目标
- **分裂**：命中后分裂成3发（主投射物伤害降低20%）
- **连锁**：连锁3个目标（主投射物伤害降低15%）
- **爆炸**：命中后爆炸（主投射物伤害降低30%）

#### 控制效果类
- **减速**：30%减速，持续2秒
- **眩晕**：眩晕0.8秒
- **易伤**：15%易伤，持续3秒

#### 区域效果类
- **大范围**：范围扩大50%
- **持续伤害**：添加持续伤害效果

#### 施法速度类
- **快速施法**：前摇减少30%
- **多重施法**：额外施放1次

#### 特殊机制类
- **蓄力**：支持蓄力机制
- **充能**：添加充能层数

#### 续航类
- **生命偷取**：10%生命偷取
- **护盾**：获得护盾

#### 高风险高回报类
- **狂暴**：100%更多伤害（负面：自身易伤20%）
- **过载**：150%更多伤害（负面：自身减速30%）
- **极致**：200%更多伤害（负面：自身定身1秒）

## 3. 兼容性规则

### 3.1 类别兼容性

- **投射类**：兼容所有副效果
- **光束类**：兼容伤害加成、控制效果、区域效果、施法速度、续航
- **近战类**：兼容伤害加成、控制效果、施法速度、续航
- **区域类**：兼容伤害加成、控制效果、区域效果、续航
- **召唤类**：兼容控制效果、续航

### 3.2 应用规则

1. 选择主效果
2. 根据兼容性规则过滤副效果
3. 应用副效果到主效果（修改baseAction）
4. 收集负面效果（如果有）
5. 生成最终技能结构

## 4. 负面效果系统

高风险高回报的副效果会带来负面效果：

- **自身减速**：移动速度降低
- **自身易伤**：受到的伤害增加
- **自身定身**：无法移动

负面效果会作为独立的Action槽位添加到技能结构中，在运行时应用到玩家身上。
