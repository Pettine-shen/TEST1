# 技能组合数量预估

基于当前模板和选项配置，预估可以组成的技能数量。

## 统计方法

1. **基础组合数**：每个槽位选项数的乘积
2. **考虑顺序重排**：基础组合数 × 槽位顺序的排列数（n!）
3. **考虑表现参数波动**：假设每个Action选项有3-5种不同的表现参数组合

## 各模板详细统计

### 1. tpl_ranged_proj_v1（远程投射物模板）

**槽位配置：**
- c1 (Condition): 2个选项 (mana30, ammo1)
- c2 (Condition): 2个选项 (range12, range18)
- t1 (Target): 5个选项 (line, coneS, coneW, allRange, lowestHp)
- a1 (Action): 12个选项 (proj_fast, proj_pierce, proj_slow, proj_scatter3, proj_scatter5, proj_burst3, proj_explosive, proj_hover, proj_hover_long, beam_short, beam_long)
- a2 (Action): 20个选项 (dmg_mid, dmg_high, percent5, percent8, true_dmg, chain3, bounce3, pierce3, reflect20, split3, execute, bleed, crit25, homing, ricochet3, spiral, orbit3, return, charge, stack3, summon_minion)
- a3 (Action): 22个选项 (slow_light, vuln10, root_short, disarm_short, heal_light, atk_boost20, speed_boost15, fear_short, charm_short, polymorph, taunt, blind, suppress, sleep, ground, banished, immunity, invulnerable, cleanse, stealth, haste, charge, stack3, summon_minion)
- tl1 (Timeline): 3个选项 (no_delay, windup, windup_long)

**计算：**
- 基础组合数 = 2 × 2 × 5 × 12 × 20 × 22 × 3 = **316,800**
- 槽位数量 = 7
- 顺序排列数 = 7! = 5,040
- 考虑顺序重排 = 316,800 × 5,040 = **1,596,672,000**

### 2. tpl_melee_burst_v1（近战爆发模板）

**槽位配置：**
- c1 (Condition): 1个选项 (range4)
- a1 (Action): 5个选项 (dash_none, dash5, blink5, jump5, pull3)
- a2 (Action): 5个选项 (cone_hit, line_thrust, charge, stack3, summon_minion)
- a3 (Action): 2个选项 (berserk, shield)
- a4 (Action): 2个选项 (knockback, ministun)
- tl1 (Timeline): 2个选项 (root05, slow1)
- tl2 (Timeline): 2个选项 (recovery02, recovery04)

**计算：**
- 基础组合数 = 1 × 5 × 5 × 2 × 2 × 2 × 2 = **400**
- 槽位数量 = 7
- 顺序排列数 = 7! = 5,040
- 考虑顺序重排 = 400 × 5,040 = **2,016,000**

### 3. tpl_counter_v1（反击模板）

**槽位配置：**
- c1 (Condition): 2个选项 (proc20, proc35)
- a1 (Action): 1个选项 (pulse)
- a2 (Action): 4个选项 (silence, slow, root, disarm)
- a3 (Action): 4个选项 (dmg_light, dmg_mid, percent6, chain2)
- a4 (Action): 2个选项 (overheat, selfroot)
- tl1 (Timeline): 2个选项 (delay0, delay150)

**计算：**
- 基础组合数 = 2 × 1 × 4 × 4 × 2 × 2 = **128**
- 槽位数量 = 6
- 顺序排列数 = 6! = 720
- 考虑顺序重排 = 128 × 720 = **92,160**

### 4. tpl_ground_dot_v1（地面持续伤害模板）

**槽位配置：**
- c1 (Condition): 1个选项 (mana25)
- t1 (Target): 2个选项 (r3, r4)
- a1 (Action): 2个选项 (area4s, area6s)
- a2 (Action): 2个选项 (slow15, healcut)
- tl1 (Timeline): 2个选项 (noDelay, delay300)

**计算：**
- 基础组合数 = 1 × 2 × 2 × 2 × 2 = **16**
- 槽位数量 = 5
- 顺序排列数 = 5! = 120
- 考虑顺序重排 = 16 × 120 = **1,920**

### 5. tpl_mark_exec_v1（标记处决模板）

**槽位配置：**
- c1 (Condition): 2个选项 (monsterOnly, any)
- t1 (Target): 1个选项 (single)
- a1 (Action): 1个选项 (mark)
- a2 (Action): 1个选项 (bonus)
- a3 (Action): 2个选项 (lightDmg, noDmg)
- tl1 (Timeline): 1个选项 (noDelay)

**计算：**
- 基础组合数 = 2 × 1 × 1 × 1 × 2 × 1 = **4**
- 槽位数量 = 6
- 顺序排列数 = 6! = 720
- 考虑顺序重排 = 4 × 720 = **2,880**

## 总计

### 基础组合数（不考虑顺序）
- **总计：317,348种**

### 考虑顺序重排
- **总计：1,598,784,960种**（约16亿种）

### 考虑表现参数波动

假设每个Action选项平均有4种不同的表现参数变化（windupMs、projectileSpeed、recoveryMs等的随机波动）：

- **tpl_ranged_proj_v1**: 3个Action槽位，平均每个槽位12个选项，表现参数变化 = 4^3 = 64倍
- **tpl_melee_burst_v1**: 4个Action槽位，表现参数变化 = 4^4 = 256倍
- **tpl_counter_v1**: 4个Action槽位，表现参数变化 = 4^4 = 256倍
- **tpl_ground_dot_v1**: 2个Action槽位，表现参数变化 = 4^2 = 16倍
- **tpl_mark_exec_v1**: 3个Action槽位，表现参数变化 = 4^3 = 64倍

**考虑表现参数波动的总组合数：**
- 1,596,672,000 × 64 + 2,016,000 × 256 + 92,160 × 256 + 1,920 × 16 + 2,880 × 64
- = 102,187,008,000 + 516,096,000 + 23,592,960 + 30,720 + 184,320
- = **约102,706,912,000种**（约1,027亿种）

## 实际有效组合数预估

由于预算限制（budgetCap）和选项之间的兼容性约束，实际能够成功编译的有效组合数会远低于理论值。

**预估有效组合数：**
- 考虑预算限制：约30%-70%的组合能够通过预算检查
- 考虑选项兼容性：部分组合可能因为逻辑冲突无法编译
- **保守估计有效组合数：约5,000万 - 10亿种**

## 结论

基于当前的技能丰富度：

1. **理论最大组合数**（考虑顺序和表现参数）：**约1,027亿种**
2. **实际有效组合数**（考虑预算和兼容性）：**约5,000万 - 10亿种**
3. **基础组合数**（不考虑顺序）：**约31.7万种**

这个数量级足以支撑一个长期运营的游戏，玩家几乎不可能遇到完全相同的技能组合。
